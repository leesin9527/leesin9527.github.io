<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Linux | leesin</title><meta name="author" content="leesin"><meta name="copyright" content="leesin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer"><meta name="description" content="用户管理添加用户1useradd 用户名  创建用户成功后，会自动创建和用户同名的家目录。 如： 12345[root@itachi103 home]# lsitachi[root@itachi103 home]# useradd tom[root@itachi103 home]# lsitachi  tom  指定&#x2F;修改密码1passwd 用户名 删除用户 删除用户，但是保留了家目录  1use">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux">
<meta property="og:url" content="https://leesin9527.github.io/post/4.html">
<meta property="og:site_name" content="leesin">
<meta property="og:description" content="用户管理添加用户1useradd 用户名  创建用户成功后，会自动创建和用户同名的家目录。 如： 12345[root@itachi103 home]# lsitachi[root@itachi103 home]# useradd tom[root@itachi103 home]# lsitachi  tom  指定&#x2F;修改密码1passwd 用户名 删除用户 删除用户，但是保留了家目录  1use">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://cdn.leesin.fun/hexo/article/4.jpg">
<meta property="article:published_time" content="2022-10-30T01:05:50.000Z">
<meta property="article:modified_time" content="2023-03-27T07:27:31.963Z">
<meta property="article:author" content="leesin">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="服务器">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://cdn.leesin.fun/hexo/article/4.jpg"><link rel="shortcut icon" href="https://cdn.leesin.fun/hexo/favicon.png"><link rel="canonical" href="https://leesin9527.github.io/post/4.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-27 15:27:31'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/myStyle.css"><link rel="stylesheet" href="/css/frontSetting.css"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/universe.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.leesin.fun/hexo/avatar.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-video"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('http://cdn.leesin.fun/hexo/article/4.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="leesin"><span class="site-name">leesin</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-video"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-30T01:05:50.000Z" title="发表于 2022-10-30 09:05:50">2022-10-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-27T07:27:31.963Z" title="更新于 2023-03-27 15:27:31">2023-03-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>33分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h1><h2 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd 用户名</span><br></pre></td></tr></table></figure>
<blockquote>
<p>创建用户成功后，会自动创建和用户同名的家目录。</p>
<p>如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 home]<span class="comment"># ls</span></span><br><span class="line">itachi</span><br><span class="line">[root@itachi103 home]<span class="comment"># useradd tom</span></span><br><span class="line">[root@itachi103 home]<span class="comment"># ls</span></span><br><span class="line">itachi  tom</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="指定-修改密码"><a href="#指定-修改密码" class="headerlink" title="指定/修改密码"></a>指定/修改密码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd 用户名</span><br></pre></td></tr></table></figure>
<h2 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h2><ol>
<li>删除用户，但是保留了家目录</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel 用户名</span><br></pre></td></tr></table></figure>
<ol>
<li>删除用户以及用户主目录</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r 用户名</span><br></pre></td></tr></table></figure>
<h2 id="查询用户信息指令"><a href="#查询用户信息指令" class="headerlink" title="查询用户信息指令"></a>查询用户信息指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> 用户名</span><br></pre></td></tr></table></figure>
<p>举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 home]<span class="comment"># id root</span></span><br><span class="line">uid=0(root) gid=0(root) 组=0(root)</span><br><span class="line"></span><br><span class="line">[root@itachi103 home]<span class="comment"># id tom</span></span><br><span class="line">uid=1001(tom) gid=1001(tom) 组=1001(tom)</span><br></pre></td></tr></table></figure>
<h2 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h2><p>在操作Linux中，如果当前用户的权限不够，可以通过su - 指令，切换到高权限用户，比如root</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - 用户名</span><br></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>从高权限用户切换到低权限用户，不需要输入密码，反之需要。</li>
<li>当需要返回到原来用户时，使用 <code>exit</code> 或 <code>logout</code> 指令</li>
</ol>
</blockquote>
<h2 id="查看当前用户"><a href="#查看当前用户" class="headerlink" title="查看当前用户"></a>查看当前用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">whoami</span></span><br></pre></td></tr></table></figure>
<h2 id="查看登录用用户"><a href="#查看登录用用户" class="headerlink" title="查看登录用用户"></a>查看登录用用户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span> am i</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>whoami</code> 显示的是当前使用的身份</p>
<p>而 <code>who am i</code> 显示的是最初登录的身份</p>
</blockquote>
<h2 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h2><h3 id="新增组"><a href="#新增组" class="headerlink" title="新增组"></a>新增组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd 组名</span><br></pre></td></tr></table></figure>
<h3 id="删除组"><a href="#删除组" class="headerlink" title="删除组"></a>删除组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel 组名</span><br></pre></td></tr></table></figure>
<h3 id="添加用户时，给其指定组"><a href="#添加用户时，给其指定组" class="headerlink" title="添加用户时，给其指定组"></a>添加用户时，给其指定组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -g 组名 用户名</span><br></pre></td></tr></table></figure>
<blockquote>
<p>举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 home]<span class="comment"># groupadd wudang</span></span><br><span class="line">[root@itachi103 home]<span class="comment"># useradd -g wudang zhangwuji</span></span><br><span class="line">[root@itachi103 home]<span class="comment"># id zhangwuji</span></span><br><span class="line">uid=1002(zhangwuji) gid=1002(wudang) 组=1002(wudang)</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="添加用户时，未指定指定组"><a href="#添加用户时，未指定指定组" class="headerlink" title="添加用户时，未指定指定组"></a>添加用户时，未指定指定组</h3><p>添加用户时，未指定指定组，则默认会创建一个跟用户名相同的组，并且把该用户放在该组中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 home]<span class="comment"># useradd leesin</span></span><br><span class="line">[root@itachi103 home]<span class="comment"># id leesin</span></span><br><span class="line">uid=1003(leesin) gid=1003(leesin) 组=1003(leesin)</span><br></pre></td></tr></table></figure>
<h2 id="修改用户的组"><a href="#修改用户的组" class="headerlink" title="修改用户的组"></a>修改用户的组</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g 组名 用户名</span><br></pre></td></tr></table></figure>
<p>举例：将zhangwuji修改组为mojiao</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 home]<span class="comment"># id zhangwuji</span></span><br><span class="line">uid=1002(zhangwuji) gid=1002(wudang) 组=1002(wudang)</span><br><span class="line">[root@itachi103 home]<span class="comment"># groupadd mojiao</span></span><br><span class="line">[root@itachi103 home]<span class="comment"># usermod -g mojiao zhangwuji </span></span><br><span class="line">[root@itachi103 home]<span class="comment"># id zhangwuji</span></span><br><span class="line">uid=1002(zhangwuji) gid=1003(mojiao) 组=1003(mojiao)</span><br></pre></td></tr></table></figure>
<h2 id="用户和组的相关文件"><a href="#用户和组的相关文件" class="headerlink" title="用户和组的相关文件"></a>用户和组的相关文件</h2><ul>
<li><code>/etc/passwd</code> 文件</li>
</ul>
<p>用户的配置文件，记录用户的各种信息</p>
<ul>
<li><code>/etc/shadow</code> 文件</li>
</ul>
<p>口令的配置文件，记录了用户加密过后的密码</p>
<ul>
<li><code>/etc/group</code> 文件</li>
</ul>
<p>组的配置文件，记录Linux包含的组的信息</p>
<h1 id="实用指令"><a href="#实用指令" class="headerlink" title="实用指令"></a>实用指令</h1><h2 id="运行级别"><a href="#运行级别" class="headerlink" title="运行级别"></a>运行级别</h2><blockquote>
<p>0：关机</p>
<p>1：单用户【找回丢失密码】</p>
<p>2：多用户状态没有网络服务</p>
<p>3：多用户状态有网络服务，无界面</p>
<p>4：系统未使用，保留</p>
<p>5：图形界面</p>
<p>6：系统重启</p>
<p>常用的运行级别是3和5，也可以指定默认运行级别</p>
</blockquote>
<h3 id="切换运行级别"><a href="#切换运行级别" class="headerlink" title="切换运行级别"></a>切换运行级别</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init [0/1/2/3/4/5/6]</span><br></pre></td></tr></table></figure>
<h3 id="查看默认运行级别"><a href="#查看默认运行级别" class="headerlink" title="查看默认运行级别"></a>查看默认运行级别</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl get-default </span><br></pre></td></tr></table></figure>
<p>举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 ~]<span class="comment"># systemctl get-default </span></span><br><span class="line">graphical.target</span><br></pre></td></tr></table></figure>
<h3 id="修改默认运行级别"><a href="#修改默认运行级别" class="headerlink" title="修改默认运行级别"></a>修改默认运行级别</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl set-default TARGET.target</span><br></pre></td></tr></table></figure>
<blockquote>
<p>TARGET.target可选</p>
<ul>
<li>multi-user.target</li>
<li>graphical.target</li>
</ul>
</blockquote>
<p>示例：将默认运行级别从5改成3</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 ~]<span class="comment"># systemctl get-default </span></span><br><span class="line">graphical.target</span><br><span class="line">[root@itachi103 ~]<span class="comment"># systemctl set-default multi-user.target </span></span><br><span class="line">Removed symlink /etc/systemd/system/default.target.</span><br><span class="line">Created symlink from /etc/systemd/system/default.target to /usr/lib/systemd/system/multi-user.target.</span><br><span class="line">[root@itachi103 ~]<span class="comment"># systemctl get-default </span></span><br><span class="line">multi-user.target</span><br><span class="line">[root@itachi103 ~]<span class="comment"># init 6</span></span><br></pre></td></tr></table></figure>
<p>重启之后，即是无图形化界面的多用户状态有网络服务</p>
<h2 id="帮助指令"><a href="#帮助指令" class="headerlink" title="帮助指令"></a>帮助指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man + 指令</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span> + 命令</span><br></pre></td></tr></table></figure>
<h2 id="gt-和-gt-gt-指令"><a href="#gt-和-gt-gt-指令" class="headerlink" title="&gt;和&gt;&gt;指令"></a>&gt;和&gt;&gt;指令</h2><p><code>&gt;</code>是输出重定向</p>
<p><code>&gt;&gt;</code>是追加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> a.txt &gt; b.txt</span><br><span class="line"><span class="comment"># 将a.txt的内容覆盖到b.txt中</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> a.txt &gt;&gt; b.txt</span><br><span class="line"><span class="comment"># 将a.txt的内容追加到b.txt中</span></span><br></pre></td></tr></table></figure>
<h2 id="ln指令"><a href="#ln指令" class="headerlink" title="ln指令"></a>ln指令</h2><p>软链接也称为符号链接，类似于windows里的快捷方式，主要存放了链接其他文件的路径</p>
<p>基本语法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s [原文件或目录] [软链接名]</span><br></pre></td></tr></table></figure>
<p>举例1：在/home目录下创建一个软链接myroot，连接到/root目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /root /home/myroot</span><br></pre></td></tr></table></figure>
<p>举例2：删除该软链接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> /home/myroot</span><br></pre></td></tr></table></figure>
<h2 id="history指令"><a href="#history指令" class="headerlink" title="history指令"></a>history指令</h2><p>查看已经执行过的历史命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span></span><br></pre></td></tr></table></figure>
<p>查看最近使用过的10条历史命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> 10</span><br></pre></td></tr></table></figure>
<h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><p>查看本机时间</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span></span><br></pre></td></tr></table></figure>
<p>查看日历</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cal</span><br></pre></td></tr></table></figure>
<p>设置系统当前时间</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> -s <span class="string">&quot;2020-11-11 20:00:00&quot;</span></span><br></pre></td></tr></table></figure>
<p>显示2020年日历</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cal 2020</span><br></pre></td></tr></table></figure>
<h2 id="搜索类指令"><a href="#搜索类指令" class="headerlink" title="搜索类指令"></a>搜索类指令</h2><h3 id="find指令"><a href="#find指令" class="headerlink" title="find指令"></a>find指令</h3><blockquote>
<p> find指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [搜索范围] [选项]</span><br></pre></td></tr></table></figure>
<p>选项说明：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>-name &lt;查询方式&gt;</td>
<td>按照指定的文件名查找模式查找文件</td>
<td><code>find /etc/ -name yum.conf</code></td>
</tr>
<tr>
<td>-user &lt;用户名&gt;</td>
<td>查找属于指定用户名的所有文件</td>
<td><code>find /opt -user root</code></td>
</tr>
<tr>
<td>-size &lt;文件大小&gt;</td>
<td>按照指定的文件大小查找文件</td>
<td><code>find / -size +100M</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="locate指令"><a href="#locate指令" class="headerlink" title="locate指令"></a>locate指令</h3><blockquote>
<p>locate指令可以快速定位文件路径。locate指令利用实现建立的系统中所有文件名称及路径的locate数据库实现快速定位给定的文件。</p>
<p>locate无需遍历整个文件系统，查询速度较快。</p>
<p>为了保证查询结果的准确度，管理员必须定期更新locate数据库</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locate [文件名]</span><br></pre></td></tr></table></figure>
<p>举例：搜索yum.conf所在路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 由于locate指令基于数据库进行查询，所以第一次运行前，必须使用updatedb指令创建locate数据库</span></span><br><span class="line">[root@itachi103 etc]<span class="comment"># updatedb</span></span><br><span class="line"></span><br><span class="line">[root@itachi103 etc]<span class="comment"># locate yum.conf</span></span><br><span class="line">/etc/yum.conf</span><br><span class="line">/usr/share/man/man5/yum.conf.5</span><br></pre></td></tr></table></figure>
<h3 id="which指令"><a href="#which指令" class="headerlink" title="which指令"></a>which指令</h3><blockquote>
<p>可以查看某个指令在哪个目录下</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> [指令]</span><br></pre></td></tr></table></figure>
<p>举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 etc]<span class="comment"># which ls</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls --color=auto&#x27;</span></span><br><span class="line">	/usr/bin/ls</span><br><span class="line"></span><br><span class="line">[root@itachi103 etc]<span class="comment"># which reboot</span></span><br><span class="line">/usr/sbin/reboot</span><br></pre></td></tr></table></figure>
<h3 id="grep指令和管道符号"><a href="#grep指令和管道符号" class="headerlink" title="grep指令和管道符号|"></a>grep指令和管道符号<code>|</code></h3><p>表示将前一个命令的处理结果输出传递给后面的命令处理。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [选项] 查找内容 源文件</span><br></pre></td></tr></table></figure>
<p>常用选项</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-n</td>
<td style="text-align:center">显示匹配行及行号</td>
</tr>
<tr>
<td style="text-align:center">-i</td>
<td style="text-align:center">忽略字母大小写</td>
</tr>
</tbody>
</table>
</div>
<p>举例：请在/home/hello.txt文件中，查找”yes”所在行，并且显示行号</p>
<p>有两种方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 etc]<span class="comment"># cat /home/hello.txt </span></span><br><span class="line">hello</span><br><span class="line"><span class="built_in">yes</span></span><br><span class="line">asd</span><br><span class="line">Yes</span><br><span class="line">ddd</span><br><span class="line"><span class="built_in">yes</span></span><br><span class="line">jack</span><br><span class="line">[root@itachi103 etc]<span class="comment"># grep -n &quot;yes&quot; /home/hello.txt </span></span><br><span class="line">2:<span class="built_in">yes</span></span><br><span class="line">6:<span class="built_in">yes</span></span><br><span class="line">[root@itachi103 etc]<span class="comment"># cat /home/hello.txt | grep -n &quot;yes&quot;</span></span><br><span class="line">2:<span class="built_in">yes</span></span><br><span class="line">6:<span class="built_in">yes</span></span><br></pre></td></tr></table></figure>
<h2 id="压缩解压"><a href="#压缩解压" class="headerlink" title="压缩解压"></a>压缩解压</h2><h3 id="gzip-gunzip-压缩-解压缩"><a href="#gzip-gunzip-压缩-解压缩" class="headerlink" title="gzip/gunzip  压缩/解压缩"></a>gzip/gunzip  压缩/解压缩</h3><h3 id="zip-unzip"><a href="#zip-unzip" class="headerlink" title="zip/unzip"></a>zip/unzip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zip [选项] XXX.zip 将要压缩的内容</span><br><span class="line">unzip [选项] xxx.zip</span><br></pre></td></tr></table></figure>
<blockquote>
<p>zip常用选项：<code>-r</code> 递归压缩，即压缩目录</p>
<p>unzip常用选项： <code>-d &lt;目录&gt;</code>     指定解压后文件的存放目录</p>
</blockquote>
<p>例如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例1：将/home下的所有文件压缩成myhome.zip</span></span><br><span class="line">zip -r myhome.zip /home/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：将myhome.zip解压到/opt/tmp目录下</span></span><br><span class="line"><span class="built_in">mkdir</span> /opt/tmp</span><br><span class="line">unzip -d /opt/tmp /home/myhome.zip</span><br></pre></td></tr></table></figure>
<h3 id="tar指令"><a href="#tar指令" class="headerlink" title="tar指令"></a>tar指令</h3><p>tar指令是打包指令，最后打包后的文件是 <code>.tar.gz</code> 的文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar [选项] XXX.tar.gz 打包内容</span><br></pre></td></tr></table></figure>
<p>选项说明</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>-c</td>
<td>产生.tar打包文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示详细信息</td>
</tr>
<tr>
<td>-f</td>
<td>指定压缩后的文件名</td>
</tr>
<tr>
<td>-z</td>
<td>打包同时压缩</td>
</tr>
<tr>
<td>-x</td>
<td>解包.tar文件</td>
</tr>
</tbody>
</table>
</div>
<p>举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例1：压缩多个文件，将/home/pig.txt和/home/cat.txt压缩成pc.tar.gz</span></span><br><span class="line"><span class="built_in">cd</span> /home</span><br><span class="line"><span class="built_in">touch</span> pig.txt</span><br><span class="line"><span class="built_in">touch</span> cat.txt</span><br><span class="line">tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：删除/home/的pig.txt和cat.txt，将pc.tar.gz解压到当前目录</span></span><br><span class="line"><span class="built_in">rm</span> -f pig.txt cat.txt </span><br><span class="line">tar -zxvf pc.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例3：将/home的文件夹压缩成myhome.tar.gz</span></span><br><span class="line">tar -zcvf myhome.tar.gz /home/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例4：将myhome.tar.gz解压到/opt/tmp2目录下</span></span><br><span class="line"><span class="built_in">mkdir</span> /opt/tmp2</span><br><span class="line">tar -zxvf /home/myhome.tar.gz -C /opt/tmp2</span><br></pre></td></tr></table></figure>
<h1 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls -l中显示的内容如下：</span></span><br><span class="line">-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc</span><br></pre></td></tr></table></figure>
<p>0-9位说明：</p>
<ul>
<li><p>第0位确定文件类型（d, -, l, c, b）</p>
<ul>
<li><p>-是普通文件</p>
</li>
<li><p>l是链接</p>
</li>
<li><p>d是目录文件</p>
</li>
<li><p>c是字符设备文件，如鼠标键盘</p>
</li>
<li><p>b是块设备，如硬盘</p>
</li>
</ul>
</li>
<li><p>1-3位确定所有者的权限</p>
</li>
<li><p>4-6位确定所属组的权限</p>
</li>
<li><p>7-9位确定其他用户权限</p>
</li>
</ul>
<h3 id="chmod指令"><a href="#chmod指令" class="headerlink" title="chmod指令"></a>chmod指令</h3><h4 id="第一种方式"><a href="#第一种方式" class="headerlink" title="第一种方式"></a>第一种方式</h4><p>u:所有者  g:所有组  o：其他人  a:所有人</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u=rwx,g=rx,o=x [文件/目录名]</span><br><span class="line"><span class="built_in">chmod</span> o+w [文件/目录名]</span><br><span class="line"><span class="built_in">chmod</span> a-x [文件/目录名]</span><br></pre></td></tr></table></figure>
<h4 id="第二种方式"><a href="#第二种方式" class="headerlink" title="第二种方式"></a>第二种方式</h4><p>r=4 w=2 x=1  rwx=4+2+1=7</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u=rwx,g=rx,o=x [文件/目录名]</span><br><span class="line"><span class="built_in">chmod</span> 751 [文件/目录名]</span><br></pre></td></tr></table></figure>
<h4 id="改变文件所有者"><a href="#改变文件所有者" class="headerlink" title="改变文件所有者"></a>改变文件所有者</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> [新的所有者] [文件/目录名]</span><br></pre></td></tr></table></figure>
<p>举例：将/home/abc.txt文件所有者修改为tom</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> tom /home/abc.txt</span><br></pre></td></tr></table></figure>
<h4 id="改变文件所有者和所有组"><a href="#改变文件所有者和所有组" class="headerlink" title="改变文件所有者和所有组"></a>改变文件所有者和所有组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> [新的所有者]:[新的组] [文件/目录名]</span><br></pre></td></tr></table></figure>
<p>举例：将/home/test目录下所有文件和目录的所有者都修改成tom</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R tom /home/test</span><br></pre></td></tr></table></figure>
<h3 id="修改文件所有组"><a href="#修改文件所有组" class="headerlink" title="修改文件所有组"></a>修改文件所有组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> [新组] [文件/目录名]</span><br></pre></td></tr></table></figure>
<p>举例：将/home/test目录下所有文件和目录的所在组都修改成shaolin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> -R shaolin /home/test</span><br></pre></td></tr></table></figure>
<h3 id="rwx作用到文件"><a href="#rwx作用到文件" class="headerlink" title="rwx作用到文件"></a>rwx作用到文件</h3><ul>
<li>r：可以读取，查看</li>
<li>w：可以修改。但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限。</li>
<li>x：可以被执行</li>
</ul>
<h3 id="rwx作用到目录"><a href="#rwx作用到目录" class="headerlink" title="rwx作用到目录"></a>rwx作用到目录</h3><ul>
<li>r：可以读取，ls查看目录内容</li>
<li>w：可以修改，<strong>对目录内创建+删除+重命名</strong></li>
<li>x：<strong>可以进入该目录</strong></li>
</ul>
<h1 id="定时任务调度"><a href="#定时任务调度" class="headerlink" title="定时任务调度"></a>定时任务调度</h1><h2 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab [选项]</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-e</td>
<td style="text-align:center">编辑crontab定时任务</td>
</tr>
<tr>
<td style="text-align:center">-l</td>
<td style="text-align:center">查询crontab任务</td>
</tr>
<tr>
<td style="text-align:center">-r</td>
<td style="text-align:center">删除当前用户所有的crontab任务</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加任务</span></span><br><span class="line">crontab -e</span><br><span class="line"><span class="comment"># 输入任务到文件中，保存并退出</span></span><br><span class="line">*/1 * * * * <span class="built_in">ls</span> -l /etc/ &gt; /tmp/to.txt</span><br><span class="line"><span class="comment"># 意思是说每分钟都执行一次ls -l /etc/ &gt; /tmp/to.txt命令</span></span><br></pre></td></tr></table></figure>
<h4 id="参数细节说明"><a href="#参数细节说明" class="headerlink" title="参数细节说明"></a>参数细节说明</h4><h5 id="5个占位符说明"><a href="#5个占位符说明" class="headerlink" title="5个占位符说明"></a>5个占位符说明</h5><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">项目</th>
<th style="text-align:center">含义</th>
<th style="text-align:center">范围</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">第一个 *</td>
<td style="text-align:center">一小时当中的第几分钟</td>
<td style="text-align:center">0-59</td>
</tr>
<tr>
<td style="text-align:center">第二个 *</td>
<td style="text-align:center">一天当中的第几个小时</td>
<td style="text-align:center">0-23</td>
</tr>
<tr>
<td style="text-align:center">第三个 *</td>
<td style="text-align:center">一个月当中的第几天</td>
<td style="text-align:center">1-31</td>
</tr>
<tr>
<td style="text-align:center">第四个 *</td>
<td style="text-align:center">一年当中的第几月</td>
<td style="text-align:center">1-12</td>
</tr>
<tr>
<td style="text-align:center">第五个 *</td>
<td style="text-align:center">一周当中的星期几</td>
<td style="text-align:center">0-7（0和7都表示星期日）</td>
</tr>
</tbody>
</table>
</div>
<h5 id="特殊符号说明"><a href="#特殊符号说明" class="headerlink" title="特殊符号说明"></a>特殊符号说明</h5><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">特殊符号</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">代表任何时间，比如第一个*就代表一小时中每分钟都执行一次的意思</td>
</tr>
<tr>
<td style="text-align:center">,</td>
<td style="text-align:center">代表不连续的时间，比如 <code>0 8,12,16 * * *</code> ，就代表在每天的8点0分，12点0分，16点0分都执行一次命令</td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">代表连续的时间范围，比如 <code>0 5 * * 1-6</code>， 代表周一到周六的凌晨5点0分执行命令</td>
</tr>
<tr>
<td style="text-align:center">*/n</td>
<td style="text-align:center">代表每隔多久执行一次。比如 <code>*/10 * * * *</code> ,代表每隔10分钟就执行一遍命令</td>
</tr>
</tbody>
</table>
</div>
<h5 id="特殊时间执行案例"><a href="#特殊时间执行案例" class="headerlink" title="特殊时间执行案例"></a>特殊时间执行案例</h5><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">时间</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">45 22 <em> </em> *</td>
<td style="text-align:center">在22点45分执行命令</td>
</tr>
<tr>
<td style="text-align:center">0 17 <em> </em> 1</td>
<td style="text-align:center">每周1的17点0分执行命令</td>
</tr>
<tr>
<td style="text-align:center">0 5 1,15 <em> </em></td>
<td style="text-align:center">每月的1号和15号的凌晨5点0分执行命令</td>
</tr>
<tr>
<td style="text-align:center">40 4 <em> </em> 1-5</td>
<td style="text-align:center">每周一到周五的凌晨4点40分执行命令</td>
</tr>
<tr>
<td style="text-align:center"><em>/10 4 </em> <em> </em></td>
<td style="text-align:center">每天的凌晨4点，每隔10分钟执行一次命令</td>
</tr>
<tr>
<td style="text-align:center">0 0 1,15 * 1</td>
<td style="text-align:center">每月1号和15号，每周一的0点0分都会执行命令。</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>注意：星期几和几号，最好不要同时出现，因为他们的定义都是天，非常容易让管理员混乱。</p>
</blockquote>
<h2 id="at"><a href="#at" class="headerlink" title="at"></a>at</h2><h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><ul>
<li>at命令是一次性定时计划任务，at的守护进程atd会以后台模式运行，检查作业队列来运行。</li>
<li>默认情况下，atd守护进程每60秒检查作业队列，有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业。</li>
<li>at执行完一个任务后就不再执行此任务了。</li>
<li>在使用at命令之前，一定要确保atd进程的启动，可以使用<code>ps -ef | grep atd</code> 来检测atd是否在运行。</li>
</ul>
<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">at [选项] [时间]</span><br><span class="line">ctrl + D 结束at命令的输入，按两次</span><br></pre></td></tr></table></figure>
<h4 id="at命令选项"><a href="#at命令选项" class="headerlink" title="at命令选项"></a>at命令选项</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-m</td>
<td style="text-align:center">当指定的任务被完成后，将给用户发邮件，即使没有标准输出</td>
</tr>
<tr>
<td style="text-align:center">-I</td>
<td style="text-align:center">atq的别名</td>
</tr>
<tr>
<td style="text-align:center">-d</td>
<td style="text-align:center">atrm的别名</td>
</tr>
<tr>
<td style="text-align:center">-v</td>
<td style="text-align:center">显示任务将被执行的时间</td>
</tr>
<tr>
<td style="text-align:center">-c</td>
<td style="text-align:center">打印任务的内容到输出</td>
</tr>
<tr>
<td style="text-align:center">-V</td>
<td style="text-align:center">显示版本信息</td>
</tr>
<tr>
<td style="text-align:center">-q &lt;队列&gt;</td>
<td style="text-align:center">使用指定的队列</td>
</tr>
<tr>
<td style="text-align:center">-f &lt;文件&gt;</td>
<td style="text-align:center">从指定文件读入任务而不是从标准输入读入</td>
</tr>
<tr>
<td style="text-align:center">-t &lt;时间参数&gt;</td>
<td style="text-align:center">以时间参数的形式提交要运行的任务</td>
</tr>
</tbody>
</table>
</div>
<h4 id="at时间定义"><a href="#at时间定义" class="headerlink" title="at时间定义"></a>at时间定义</h4><ol>
<li>接受在当天的 hh:mm(小时:分钟)式的时间指定。假如该时间已过去，那么就放在第二天执行。 例如:04:00</li>
<li>使用 midmight (深夜)，non (中午)，teatime (饮茶时间，一般是下午 4 点) 等比较模糊的词语来指定时间.</li>
<li>采用 12 小时计时制，即在时间后面加上 AM (上午)或PM (下午）来说明是上午还是下午。 例如: 12pm。</li>
<li>指定命令执行的具体日期，指定格式为 month day (月 日)或mm/dd/yy (/日/年)或 dd.mm.yy (日.月.年)，指定的日期必须跟在指定时间的后面。 例如:04:00 2021-03-1</li>
<li>使用相对计时法。指定格式为:now +count time-units ,now 就是当前时间,tme-units 是时间单位,这里能够是 minutes(分钟)、hours (小时)、days (天)、weeks (星期)。count 是时间的数量，几天，几小时。 例如: now +5 minutes</li>
<li>直接使用 today (今天)、tomorrow (明天) 来指定完成命令的时间。</li>
</ol>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>2天后的下午5点执行 /bin/ls /home</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 tmp]<span class="comment"># at 5pm + 2 days</span></span><br><span class="line">at&gt; /bin/ls /home&lt;EOT&gt;</span><br><span class="line">job 1 at Mon Feb 27 17:00:00 2023</span><br></pre></td></tr></table></figure>
<p>atq命令查看系统中没有执行的工作任务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 tmp]<span class="comment"># atq</span></span><br><span class="line">1	Mon Feb 27 17:00:00 2023 a root</span><br></pre></td></tr></table></figure>
<h1 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h1><h2 id="磁盘分区、挂载"><a href="#磁盘分区、挂载" class="headerlink" title="磁盘分区、挂载"></a>磁盘分区、挂载</h2><p>以增加一块硬盘为例来熟悉下磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念。</p>
<h4 id="1-虚拟机添加硬盘"><a href="#1-虚拟机添加硬盘" class="headerlink" title="1.虚拟机添加硬盘"></a>1.虚拟机添加硬盘</h4><p><img src="http://cdn.leesin.fun/typora/s3/img/虚拟机添加硬盘.png" alt="虚拟机添加硬盘"></p>
<p>然后重启机器</p>
<h4 id="2-分区"><a href="#2-分区" class="headerlink" title="2.分区"></a>2.分区</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 dev]<span class="comment"># lsblk</span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   50G  0 disk </span><br><span class="line">├─sda1            8:1    0  953M  0 part /boot</span><br><span class="line">└─sda2            8:2    0   49G  0 part </span><br><span class="line">  ├─centos-root 253:0    0   45G  0 lvm  /</span><br><span class="line">  └─centos-swap 253:1    0    4G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0    2G  0 disk </span><br><span class="line">sr0              11:0    1  4.4G  0 rom  </span><br><span class="line"></span><br><span class="line">[root@itachi103 dev]<span class="comment"># fdisk /dev/sdb</span></span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line"></span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">使用磁盘标识符 0x7f1e1ee6 创建新的 DOS 磁盘标签。</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：m</span><br><span class="line">命令操作</span><br><span class="line">   a   toggle a bootable flag</span><br><span class="line">   b   edit bsd disklabel</span><br><span class="line">   c   toggle the dos compatibility flag</span><br><span class="line">   d   delete a partition</span><br><span class="line">   g   create a new empty GPT partition table</span><br><span class="line">   G   create an IRIX (SGI) partition table</span><br><span class="line">   l   list known partition types</span><br><span class="line">   m   <span class="built_in">print</span> this menu</span><br><span class="line">   n   add a new partition</span><br><span class="line">   o   create a new empty DOS partition table</span><br><span class="line">   p   <span class="built_in">print</span> the partition table</span><br><span class="line">   q   quit without saving changes</span><br><span class="line">   s   create a new empty Sun disklabel</span><br><span class="line">   t   change a partition<span class="string">&#x27;s system id</span></span><br><span class="line"><span class="string">   u   change display/entry units</span></span><br><span class="line"><span class="string">   v   verify the partition table</span></span><br><span class="line"><span class="string">   w   write table to disk and exit</span></span><br><span class="line"><span class="string">   x   extra functionality (experts only)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：n</span></span><br><span class="line"><span class="string">Partition type:</span></span><br><span class="line"><span class="string">   p   primary (0 primary, 0 extended, 4 free)</span></span><br><span class="line"><span class="string">   e   extended</span></span><br><span class="line"><span class="string">Select (default p): p</span></span><br><span class="line"><span class="string">分区号 (1-4，默认 1)：1</span></span><br><span class="line"><span class="string">起始 扇区 (2048-4194303，默认为 2048)：</span></span><br><span class="line"><span class="string">将使用默认值 2048</span></span><br><span class="line"><span class="string">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-4194303，默认为 4194303)：</span></span><br><span class="line"><span class="string">将使用默认值 4194303</span></span><br><span class="line"><span class="string">分区 1 已设置为 Linux 类型，大小设为 2 GiB</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">命令(输入 m 获取帮助)：w</span></span><br><span class="line"><span class="string">The partition table has been altered!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Calling ioctl() to re-read partition table.</span></span><br><span class="line"><span class="string">正在同步磁盘。</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<h4 id="3-格式化磁盘"><a href="#3-格式化磁盘" class="headerlink" title="3.格式化磁盘"></a>3.格式化磁盘</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs -t ext4 /dev/sdb1 </span><br></pre></td></tr></table></figure>
<h4 id="4-挂载"><a href="#4-挂载" class="headerlink" title="4.挂载"></a>4.挂载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mount [设备名称] [挂载目录]</span><br><span class="line">umount [设备名称]</span><br><span class="line">umount [挂载目录]</span><br></pre></td></tr></table></figure>
<p>如1：把分区sdb1挂载到/newdisk上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 /]<span class="comment"># mount /dev/sdb1 /newdisk/</span></span><br><span class="line">[root@itachi103 /]<span class="comment"># lsblk -f</span></span><br><span class="line">NAME            FSTYPE      LABEL           UUID                                   MOUNTPOINT</span><br><span class="line">sdb                                                                                </span><br><span class="line">└─sdb1          ext4                        2ce25320-09e8-4ce5-bb9e-b55b0c313d3f   /newdisk</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果到此步，用命令行挂载，重启后会失效</p>
</blockquote>
<p>如2：把分区sdb1取消挂载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 /]<span class="comment"># umount /dev/sdb1</span></span><br><span class="line"></span><br><span class="line">[root@itachi103 /]<span class="comment"># lsblk -f</span></span><br><span class="line">NAME            FSTYPE      LABEL           UUID                                   MOUNTPOINT</span><br><span class="line">sdb                                                                                </span><br><span class="line">└─sdb1          ext4                        2ce25320-09e8-4ce5-bb9e-b55b0c313d3f   </span><br></pre></td></tr></table></figure>
<h4 id="5-永久挂载"><a href="#5-永久挂载" class="headerlink" title="5.永久挂载"></a>5.永久挂载</h4><p>修改 /etc/fstab 实现挂载，添加完成后执行<code>mount -a</code> 即刻生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 /etc/fstab 中添加如下内容</span></span><br><span class="line">/dev/sdb1       /newdisk        ext4    defaults        0 0</span><br></pre></td></tr></table></figure>
<h2 id="磁盘情况查询"><a href="#磁盘情况查询" class="headerlink" title="磁盘情况查询"></a>磁盘情况查询</h2><h3 id="查询系统整体磁盘使用情况"><a href="#查询系统整体磁盘使用情况" class="headerlink" title="查询系统整体磁盘使用情况"></a>查询系统整体磁盘使用情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure>
<h3 id="查询指定目录使用情况"><a href="#查询指定目录使用情况" class="headerlink" title="查询指定目录使用情况"></a>查询指定目录使用情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -h</span><br><span class="line"><span class="comment"># 默认查询当前工作目录</span></span><br></pre></td></tr></table></figure>
<p>选项如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-s</td>
<td style="text-align:center">指定目录占用大小汇总</td>
</tr>
<tr>
<td style="text-align:center">-h</td>
<td style="text-align:center">带计量单位</td>
</tr>
<tr>
<td style="text-align:center">-a</td>
<td style="text-align:center">含文件</td>
</tr>
<tr>
<td style="text-align:center">—max-depth=1</td>
<td style="text-align:center">子目录深度</td>
</tr>
<tr>
<td style="text-align:center">-c</td>
<td style="text-align:center">列出明细的同时，增加汇总量</td>
</tr>
</tbody>
</table>
</div>
<p>举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 home]<span class="comment"># du -hac --max-depth=1 /opt</span></span><br><span class="line">0	/opt/rh</span><br><span class="line">0	/opt</span><br><span class="line">0	总用量</span><br></pre></td></tr></table></figure>
<h3 id="磁盘情况-工作实用指令"><a href="#磁盘情况-工作实用指令" class="headerlink" title="磁盘情况-工作实用指令"></a>磁盘情况-工作实用指令</h3><h4 id="1-统计-opt文件夹下文件的个数"><a href="#1-统计-opt文件夹下文件的个数" class="headerlink" title="1.统计/opt文件夹下文件的个数"></a>1.统计/opt文件夹下文件的个数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /home/ | grep <span class="string">&quot;^-&quot;</span> | <span class="built_in">wc</span>  -l</span><br></pre></td></tr></table></figure>
<h4 id="2-统计-opt文件夹下目录的个数"><a href="#2-统计-opt文件夹下目录的个数" class="headerlink" title="2.统计/opt文件夹下目录的个数"></a>2.统计/opt文件夹下目录的个数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /home/ | grep <span class="string">&quot;^d&quot;</span> | <span class="built_in">wc</span>  -l</span><br></pre></td></tr></table></figure>
<h4 id="3-统计-opt文件夹下文件的个数，包括子文件夹里的"><a href="#3-统计-opt文件夹下文件的个数，包括子文件夹里的" class="headerlink" title="3.统计/opt文件夹下文件的个数，包括子文件夹里的"></a>3.统计/opt文件夹下文件的个数，包括子文件夹里的</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -lR /home/ | grep <span class="string">&quot;^-&quot;</span> | <span class="built_in">wc</span>  -l</span><br></pre></td></tr></table></figure>
<h4 id="4-统计-opt文件夹下目录的个数，包括子文件夹里的"><a href="#4-统计-opt文件夹下目录的个数，包括子文件夹里的" class="headerlink" title="4.统计/opt文件夹下目录的个数，包括子文件夹里的"></a>4.统计/opt文件夹下目录的个数，包括子文件夹里的</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -lR /home/ | grep <span class="string">&quot;^d&quot;</span> | <span class="built_in">wc</span>  -l</span><br></pre></td></tr></table></figure>
<h4 id="5-以树状显示目录结构tree目录。"><a href="#5-以树状显示目录结构tree目录。" class="headerlink" title="5.以树状显示目录结构tree目录。"></a>5.以树状显示目录结构tree目录。</h4><blockquote>
<p>如果没有tree。则使用<code>yum install tree</code> 安装</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 usr]<span class="comment"># tree /home/</span></span><br><span class="line">\/home/</span><br><span class="line">├── hello.txt</span><br><span class="line">├── itachi</span><br><span class="line">│   ├── \345\205\254\345\205\261</span><br><span class="line">│   ├── \346\250\241\346\235\277</span><br><span class="line">│   ├── \350\247\206\351\242\221</span><br><span class="line">│   ├── \345\233\276\347\211\207</span><br><span class="line">│   ├── \346\226\207\346\241\243</span><br><span class="line">│   ├── \344\270\213\350\275\275</span><br><span class="line">│   ├── \351\237\263\344\271\220</span><br><span class="line">│   └── \346\241\214\351\235\242</span><br><span class="line">├── tom</span><br><span class="line">└── zhangwuji</span><br><span class="line"></span><br><span class="line">11 directories, 1 file</span><br></pre></td></tr></table></figure>
<h1 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h1><p><img src="http://cdn.leesin.fun/typora/s3/img/Linux的NAT上网模式.png" alt="Linux的NAT上网模式"></p>
<h1 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h1><h2 id="ps指令"><a href="#ps指令" class="headerlink" title="ps指令"></a>ps指令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>System V</td>
<td>展示风格</td>
</tr>
<tr>
<td>USER</td>
<td>用户名称</td>
</tr>
<tr>
<td>PID</td>
<td>进程号</td>
</tr>
<tr>
<td>%CPU</td>
<td>进程占用CPU的百分比</td>
</tr>
<tr>
<td>%MEM</td>
<td>进程占用物理内存的百分比</td>
</tr>
<tr>
<td>VSZ</td>
<td>进程占用的虚拟内存大小（单位：KB）</td>
</tr>
<tr>
<td>RSS</td>
<td>进程占用的物理内存大小（单位：KB）</td>
</tr>
<tr>
<td>TTY</td>
<td>终端名称，缩写</td>
</tr>
<tr>
<td>STAT</td>
<td>进程状态，其中S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等待</td>
</tr>
<tr>
<td>TIME</td>
<td>CPU时间，即进程使用CPU的总时间</td>
</tr>
<tr>
<td>COMMAND</td>
<td>启动进程所用的命令和参数，如果过长会被截断显示</td>
</tr>
</tbody>
</table>
</div>
<p>举例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 ~]<span class="comment"># ps -aux</span></span><br><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root          1  0.0  0.0 194196  7324 ?        Ss   04:08   0:26 /usr/lib/systemd/systemd --switched-root --system --deserialize 22</span><br><span class="line">root          2  0.0  0.0      0     0 ?        S    04:08   0:00 [kthreadd]</span><br><span class="line">root          4  0.0  0.0      0     0 ?        S&lt;   04:08   0:00 [kworker/0:0H]</span><br><span class="line">root          6  0.0  0.0      0     0 ?        S    04:08   0:01 [ksoftirqd/0]</span><br><span class="line">root          7  0.0  0.0      0     0 ?        S    04:08   0:00 [migration/0]</span><br><span class="line">root          8  0.0  0.0      0     0 ?        S    04:08   0:00 [rcu_bh]</span><br><span class="line">root          9  0.0  0.0      0     0 ?        S    04:08   0:08 [rcu_sched]</span><br><span class="line">root         10  0.0  0.0      0     0 ?        S&lt;   04:08   0:00 [lru-add-drain]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>UID</td>
<td>用户ID</td>
</tr>
<tr>
<td>PID</td>
<td>进程ID</td>
</tr>
<tr>
<td>PPID</td>
<td>父进程ID</td>
</tr>
<tr>
<td>C</td>
<td>CPU用于计算执行优先级的因子。数值越大，表明进程是CPU密集型运算，执行优先级会降低；数值越小，表明进程是I/O密集型运算，执行优先级会提高</td>
</tr>
<tr>
<td>STIME</td>
<td>进程启动的时间</td>
</tr>
<tr>
<td>TTY</td>
<td>完整的终端名称</td>
</tr>
<tr>
<td>TIME</td>
<td>CPU时间</td>
</tr>
<tr>
<td>CMD</td>
<td>启动进程所用的命令和参数</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>-e 显示所有进程</p>
<p>-f 全格</p>
</blockquote>
<h2 id="终止进程kill和killall"><a href="#终止进程kill和killall" class="headerlink" title="终止进程kill和killall"></a>终止进程kill和killall</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过进程号终止进程</span></span><br><span class="line"><span class="built_in">kill</span> [选项] 进程号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过进程名称终止进程，也支持通配符，这在系统因负载过大而变得很慢时很有用</span></span><br><span class="line">killall 进程名称</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以更加直观的来看进程信息</span></span><br><span class="line">pstree [选项]</span><br><span class="line"><span class="comment"># -p：显示进程的PID</span></span><br><span class="line"><span class="comment"># -u：显示进程的所属用户</span></span><br></pre></td></tr></table></figure>
<p>如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以树状的形式显示进程的pid</span></span><br><span class="line">pstree -p</span><br><span class="line"><span class="comment"># 以树状的形式显示进程的用户</span></span><br><span class="line">pstree -u</span><br></pre></td></tr></table></figure>
<h2 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h2><p>服务（service）本质是一个守护进程，是在后台运行的，通常会监听某个端口，等待其他程序的请求，比如（mysqld，sshd，防火墙等）。</p>
<h3 id="service管理指令"><a href="#service管理指令" class="headerlink" title="service管理指令"></a>service管理指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service 服务名 [start | stop | restart | reload | status]</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><p>在centos7.0后，很多服务不再使用service了，而是systemctl</p>
</li>
<li><p><strong>service指令管理的服务在 <code>/etc/init.d</code> 查看</strong></p>
<ul>
<li>~~~bash<br>[root@itachi103 ~]# ll /etc/init.d/<br>总用量 40<br>-rw-r—r—. 1 root root 18281 5月  22 2020 functions<br>-rwxr-xr-x. 1 root root  4569 5月  22 2020 netconsole<br>-rwxr-xr-x. 1 root root  7928 5月  22 2020 network<br>-rw-r—r—. 1 root root  1160 10月  2 2020 README<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 查看服务</span><br><span class="line"></span><br><span class="line">~~~bash</span><br><span class="line">setup</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<p>选中系统服务，按回车</p>
<p><img src="http://cdn.leesin.fun/typora/s3/img/setup1.png" alt="setup1"></p>
<p>即可查看所有服务</p>
<p><img src="http://cdn.leesin.fun/typora/s3/img/setup2.png" alt="setup2"></p>
<p>[*]表示开机自启动</p>
<p>[ ]表示开机不会自启动</p>
<p>选中某一行，按空格可以切换是否开机自启</p>
<p>按Tab键，可以选中“确定”/“取消”</p>
<h3 id="systemctl管理指令"><a href="#systemctl管理指令" class="headerlink" title="systemctl管理指令"></a>systemctl管理指令</h3><h5 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl [start | stop | restart | status] 服务名</span><br></pre></td></tr></table></figure>
<blockquote>
<p> systemctl指令管理的服务在 /usr/lib/systemd/system 查看</p>
</blockquote>
<h5 id="查看服务开机启动状态，可以使用grep进行过滤"><a href="#查看服务开机启动状态，可以使用grep进行过滤" class="headerlink" title="查看服务开机启动状态，可以使用grep进行过滤"></a>查看服务开机启动状态，可以使用grep进行过滤</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files</span><br><span class="line">systemctl list-unit-files | grep sshd</span><br></pre></td></tr></table></figure>
<h5 id="设置服务开机启动"><a href="#设置服务开机启动" class="headerlink" title="设置服务开机启动"></a>设置服务开机启动</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> 服务名</span><br></pre></td></tr></table></figure>
<h5 id="关闭服务开机启动"><a href="#关闭服务开机启动" class="headerlink" title="关闭服务开机启动"></a>关闭服务开机启动</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> 服务名</span><br></pre></td></tr></table></figure>
<h5 id="查询某个服务是否开机自启动"><a href="#查询某个服务是否开机自启动" class="headerlink" title="查询某个服务是否开机自启动"></a>查询某个服务是否开机自启动</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl is-enabled 服务名</span><br></pre></td></tr></table></figure>
<h5 id="举例：关闭防火墙，以及关闭防火墙开机自启"><a href="#举例：关闭防火墙，以及关闭防火墙开机自启" class="headerlink" title="举例：关闭防火墙，以及关闭防火墙开机自启"></a>举例：关闭防火墙，以及关闭防火墙开机自启</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭防火墙开机自启</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure>
<h3 id="firewall指令"><a href="#firewall指令" class="headerlink" title="firewall指令"></a>firewall指令</h3><h5 id="打开端口"><a href="#打开端口" class="headerlink" title="打开端口"></a>打开端口</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=端口号/协议</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h5 id="关闭端口"><a href="#关闭端口" class="headerlink" title="关闭端口"></a>关闭端口</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --remove-port=端口号/协议</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h5 id="查询端口是否开放"><a href="#查询端口是否开放" class="headerlink" title="查询端口是否开放"></a>查询端口是否开放</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --query-port=端口号/协议</span><br></pre></td></tr></table></figure>
<h3 id="动态监控系统"><a href="#动态监控系统" class="headerlink" title="动态监控系统"></a>动态监控系统</h3><h4 id="top命令"><a href="#top命令" class="headerlink" title="top命令"></a>top命令</h4><p>top与ps命令很相似。最大不同之处在于，top在执行一段时间可以更新正在运行的进程。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top [选项]</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-d 秒数</td>
<td style="text-align:center">指定top命令每隔几秒更新。默认是3秒</td>
</tr>
<tr>
<td style="text-align:center">-i</td>
<td style="text-align:center">使top不显示任何闲置或者僵死进程</td>
</tr>
<tr>
<td style="text-align:center">-p</td>
<td style="text-align:center">通过指定监控进程ID来 仅仅监控某个进程的状态</td>
</tr>
</tbody>
</table>
</div>
<h5 id="交互操作"><a href="#交互操作" class="headerlink" title="交互操作"></a>交互操作</h5><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">操作</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">P</td>
<td style="text-align:center">以CPU使用率排序，默认就是此项</td>
</tr>
<tr>
<td style="text-align:center">M</td>
<td style="text-align:center">以内存的使用率排序</td>
</tr>
<tr>
<td style="text-align:center">N</td>
<td style="text-align:center">以PID排序</td>
</tr>
<tr>
<td style="text-align:center">q</td>
<td style="text-align:center">退出top</td>
</tr>
</tbody>
</table>
</div>
<h5 id="案例1：监视特定用户"><a href="#案例1：监视特定用户" class="headerlink" title="案例1：监视特定用户"></a>案例1：监视特定用户</h5><p>top：输入此命令，按回车键，查看执行的进程</p>
<p>u : 然后输入“u” ，按回车键，再输入用户名即可</p>
<h5 id="案例2：终止特定进程"><a href="#案例2：终止特定进程" class="headerlink" title="案例2：终止特定进程"></a>案例2：终止特定进程</h5><p>top：输入此命令，按回车键，查看执行的进程</p>
<p>k: 然后输入“k”回车，再输入要结束的进程ID号</p>
<h2 id="监控网络状态"><a href="#监控网络状态" class="headerlink" title="监控网络状态"></a>监控网络状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [选项]</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-a</td>
<td style="text-align:center">显示所有socket，包括正在监听的</td>
</tr>
<tr>
<td style="text-align:center">-n</td>
<td style="text-align:center">以数字形式显示地址和端口号</td>
</tr>
<tr>
<td style="text-align:center">-p</td>
<td style="text-align:center">proto 显示proto指定的协议的连接</td>
</tr>
</tbody>
</table>
</div>
<p>如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常用命令</span></span><br><span class="line">net</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务名为sshd的服务信息</span></span><br><span class="line">netstat -anp | grep sshd</span><br></pre></td></tr></table></figure>
<h1 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h1><h2 id="系统常用日志"><a href="#系统常用日志" class="headerlink" title="系统常用日志"></a>系统常用日志</h2><p><code>/var/log</code>目录就是系统日志文件的保存位置</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">日志文件</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/var/log/boot.log</td>
<td style="text-align:center">系统启动日志</td>
</tr>
<tr>
<td style="text-align:center">/var/log/cron</td>
<td style="text-align:center">记录与系统定时任务相关的日志</td>
</tr>
<tr>
<td style="text-align:center">/var/log/lasllog</td>
<td style="text-align:center">记录系统中所有用户最后一次的登录时间的日志。这是个二进制文件，要使用lastlog命令查看</td>
</tr>
<tr>
<td style="text-align:center">/var/Iog/maillog</td>
<td style="text-align:center">记录邮件信息的日志</td>
</tr>
<tr>
<td style="text-align:center">/var/log/message</td>
<td style="text-align:center">记录系统重要消息的日志。这个日志文件中会记录Linux系统的绝大多数重要信息。如果系统出现问题，首先要检查的应该就是这个日志文件</td>
</tr>
<tr>
<td style="text-align:center">/var/log/secure</td>
<td style="text-align:center">记录验证和授权方面的信息，只要涉及账户和密码的程序都会记录。比如系统的登录、ssh的登录、su切换用户、sudo授权，甚至添加用户和修改用户密码都会记录在这个日志文件中。</td>
</tr>
<tr>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
<h2 id="日志服务管理-rsyslogd"><a href="#日志服务管理-rsyslogd" class="headerlink" title="日志服务管理 rsyslogd"></a>日志服务管理 rsyslogd</h2><h5 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h5><p><code>/etc/rsyslog.conf</code>是日志服务的配置文件。默认文件如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Log all the mail messages <span class="keyword">in</span> one place.</span></span><br><span class="line">mail.*                                                  -/var/log/maillog</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Log cron stuff</span></span><br><span class="line">cron.*                                                  /var/log/cron</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Everybody gets emergency messages</span></span><br><span class="line">*.emerg                                                 :omusrmsg:*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Save news errors of level crit and higher <span class="keyword">in</span> a special file.</span></span><br><span class="line">uucp,news.crit                                          /var/log/spooler</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Save boot messages also to boot.log</span></span><br><span class="line">local7.*                                                /var/log/boot.log</span><br></pre></td></tr></table></figure>
<p>配置的格式为:<code>*.* 存放日志文件</code><br>其中第一个 * 代表日志类型，第二个 * 代表日志级别。</p>
<h5 id="日志类型"><a href="#日志类型" class="headerlink" title="日志类型"></a>日志类型</h5><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">日志类型</th>
<th style="text-align:center">日志级别</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">auth</td>
<td style="text-align:center">pam产生的日志</td>
</tr>
<tr>
<td style="text-align:center">authpriv</td>
<td style="text-align:center">ssh、ftp 等登录信息的验证信息</td>
</tr>
<tr>
<td style="text-align:center">corn</td>
<td style="text-align:center">时间任务相关</td>
</tr>
<tr>
<td style="text-align:center">kern</td>
<td style="text-align:center">内核</td>
</tr>
<tr>
<td style="text-align:center">lpr</td>
<td style="text-align:center">打印</td>
</tr>
<tr>
<td style="text-align:center">mail</td>
<td style="text-align:center">邮件</td>
</tr>
<tr>
<td style="text-align:center">mark(syslog)-rsyslog</td>
<td style="text-align:center">服务内部的信息，时间标识</td>
</tr>
<tr>
<td style="text-align:center">news</td>
<td style="text-align:center">新闻组</td>
</tr>
<tr>
<td style="text-align:center">user</td>
<td style="text-align:center">用户程序产生的相关信息</td>
</tr>
<tr>
<td style="text-align:center">uucp</td>
<td style="text-align:center">unix to nuix copy 主机之间相关的通信</td>
</tr>
<tr>
<td style="text-align:center">local 1-7</td>
<td style="text-align:center">自定义的日志设备</td>
</tr>
</tbody>
</table>
</div>
<h5 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h5><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">日志级别</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">debug</td>
<td style="text-align:center">有调试信息的，日志通信最多</td>
</tr>
<tr>
<td style="text-align:center">info</td>
<td style="text-align:center">一般信息日志，最常用</td>
</tr>
<tr>
<td style="text-align:center">notice</td>
<td style="text-align:center">最具有重要性的普通条件的信息</td>
</tr>
<tr>
<td style="text-align:center">warning</td>
<td style="text-align:center">警告级别</td>
</tr>
<tr>
<td style="text-align:center">err</td>
<td style="text-align:center">错误级别，阻止某个功能或者模块不能正常工作的信息</td>
</tr>
<tr>
<td style="text-align:center">crit</td>
<td style="text-align:center">严重级别，阻止整个系统或者整个软件不能正常工作的信息</td>
</tr>
<tr>
<td style="text-align:center">alert</td>
<td style="text-align:center">需要立刻修改的信息</td>
</tr>
<tr>
<td style="text-align:center">emerg</td>
<td style="text-align:center">内核崩溃等重要信息</td>
</tr>
<tr>
<td style="text-align:center">none</td>
<td style="text-align:center">什么都不记录</td>
</tr>
</tbody>
</table>
</div>
<p>注意: 从上到下，级别从低到高，记录信息越来越少</p>
<h5 id="日志内容格式"><a href="#日志内容格式" class="headerlink" title="日志内容格式"></a>日志内容格式</h5><p>由日志服务 rsyslogd 记录的日志文件，日志文件的格式包含以下 4 列:</p>
<ol>
<li>事件产生的时间</li>
</ol>
<p>2) 产生事件的服务器的主机名<br>3) 产生事件的服务名或程序名<br>4) 事件的具体信息</p>
<p>如：查看一下<code>/var/log/secure</code>日志，这个日志中记录的是用户验证和授权方面的信息。</p>
<p><img src="http://cdn.leesin.fun/typora/s3/img/secure日志.png" alt="secure日志"></p>
<h2 id="日志轮替"><a href="#日志轮替" class="headerlink" title="日志轮替"></a>日志轮替</h2><h5 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍"></a>基本介绍</h5><p>日志轮替就是把旧的日志文件移动并改名，同时建立新的空日志文件，当旧日志文件超出保存的范围之后，就会进行删除</p>
<ul>
<li>centos7使用logrotate进行日志轮替管理，通过修改<code>/etc/logrotate.conf</code>配置文件中的<code>dateext</code>参数，可以改变日志轮替文件名字。</li>
<li>如果配置文件中有<code>dateext</code>参数，那么日志会用<strong>日期</strong>来作为日志文件的后缀，例如“secure-20201010”。这样日志文件名不会重叠，也就不需要日志文件的改名，只需要指定保存日志个数，删除多余的日志文件即可。</li>
<li>如果配置文件中没有<code>dateext</code>参数，日志文件就需要进行改名了。<ul>
<li>当第一次进行日志轮替时，当前的“secure”日志会自动改名为”secure.1”，然后新建”secure”日志，用来保存新的日志。</li>
<li>当第二次进行轮替时，”secure.1”会自动改名为”secure.2”，当前的”secure”日志会自动改名为”secure.1”，然后也会新建”secure”日志，用来保存新的日志，以此类推。</li>
</ul>
</li>
</ul>
<h5 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h5><p><code>/etc/logrotate.conf</code>  为logrotate的全局配置文件</p>
<p>默认内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">see <span class="string">&quot;man logrotate&quot;</span> <span class="keyword">for</span> details</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">rotate <span class="built_in">log</span> files weekly 每周对日志文件进行一次轮替</span></span><br><span class="line">weekly</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">keep 4 weeks worth of backlogs 最多共保存4份日志文件</span></span><br><span class="line">rotate 4</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create new (empty) <span class="built_in">log</span> files after rotating old ones 日志轮替后，创建新的空的日志文件</span></span><br><span class="line">create</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">use <span class="built_in">date</span> as a suffix of the rotated file 使用日期作为日志轮替文件的后缀</span></span><br><span class="line">dateext</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">uncomment this <span class="keyword">if</span> you want your <span class="built_in">log</span> files compressed 如果希望日志文件压缩，就取消注释</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">compress</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RPM packages drop <span class="built_in">log</span> rotation information into this directory</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">包含/etc/logrotate.d中的所有子配置文件。也就是说会把该目录中的所有子配置文件读取进来。</span></span><br><span class="line">include /etc/logrotate.d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">no packages own wtmp and btmp -- we<span class="string">&#x27;ll rotate them here</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">下面是单独配置，优先级更高</span></span></span><br><span class="line">/var/log/wtmp &#123;</span><br><span class="line"><span class="meta prompt_"> 	# </span><span class="language-bash"><span class="string">每月对日志文件进行一次轮替</span></span></span><br><span class="line">    monthly</span><br><span class="line">    # 建立的新日志文件，权限是 0664 ，所有者是 root ，所属组是 utmp 组</span><br><span class="line">    create 0664 root utmp</span><br><span class="line">    # 日志文件最小轮替大小是 1MB。也就是日志定要超过 1MB 才会轮替，否则就算时间达到一个月，也不进行日志转储</span><br><span class="line">	minsize 1M</span><br><span class="line"><span class="meta prompt_">	# </span><span class="language-bash"><span class="string">仅保留一个日志备份。也就是只有 wtmp 和 wtmp.1 日志保留而已</span></span></span><br><span class="line">    rotate 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/var/log/btmp &#123;</span><br><span class="line">    # 如果日志不存在，则忽略该日志的警告信息</span><br><span class="line">    missingok</span><br><span class="line">    monthly</span><br><span class="line">    create 0600 root utmp</span><br><span class="line">    rotate 1</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">system-specific logs may be also be configured here.</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>参数说明</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:center">参数说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">daily</td>
<td style="text-align:center">日志的轮替周期是每天</td>
</tr>
<tr>
<td style="text-align:center">weekly</td>
<td style="text-align:center">日志的轮替周期是每周</td>
</tr>
<tr>
<td style="text-align:center">monthly</td>
<td style="text-align:center">日志的轮琴周期是每月</td>
</tr>
<tr>
<td style="text-align:center">rotate 数字</td>
<td style="text-align:center">保留的日志文件的个数。0 指没有备份</td>
</tr>
<tr>
<td style="text-align:center">compress</td>
<td style="text-align:center">日志轮替时，旧的日志进行压缩</td>
</tr>
<tr>
<td style="text-align:center">create mode owner group</td>
<td style="text-align:center">建立新日志，同时指定新日志的权限与所有者和所属组。</td>
</tr>
<tr>
<td style="text-align:center">mail address</td>
<td style="text-align:center">当日志轮替时，输出内容通过邮件发送到指定的邮件地址.</td>
</tr>
<tr>
<td style="text-align:center">missingok</td>
<td style="text-align:center">如果日志不存在，则忽略该日志的警告信息</td>
</tr>
<tr>
<td style="text-align:center">notifempty</td>
<td style="text-align:center">如果日志为空文件，则不进行日志轮替</td>
</tr>
<tr>
<td style="text-align:center">minsize 大小</td>
<td style="text-align:center">日志轮替的最小值。也就是日志一定要达到这个最小值才会轮替，否则就算时间达到也不轮替</td>
</tr>
<tr>
<td style="text-align:center">size 大小</td>
<td style="text-align:center">日志只有大于指定大小才进行日志轮替，而不是按照时间轮替</td>
</tr>
<tr>
<td style="text-align:center">dateext</td>
<td style="text-align:center">使用日期作为日志轮替文件的后缀。</td>
</tr>
<tr>
<td style="text-align:center">sharedscripts</td>
<td style="text-align:center">在此关键字之后的脚本只执行一次</td>
</tr>
<tr>
<td style="text-align:center">prerotate</td>
<td style="text-align:center">在日志轮替之前执行脚本命令</td>
</tr>
<tr>
<td style="text-align:center">endscript</td>
<td style="text-align:center">在日志轮替之后执行脚本命令</td>
</tr>
</tbody>
</table>
</div>
<h5 id="将自己的日志加入日志轮替"><a href="#将自己的日志加入日志轮替" class="headerlink" title="将自己的日志加入日志轮替"></a>将自己的日志加入日志轮替</h5><ol>
<li>第一种方法是直接在<code>/etc/logrotate.conf</code> 配置文件中写入该日志的轮替策略</li>
<li>第二种方法是在<code>/etc/logrotate.d/</code>目录中新建立该日志的轮替文件，在该轮替文件中写入正确的轮替策略。（因为该目录中的文件都会被“include”到主配置文件中，所以也可以把日志加入轮替）</li>
</ol>
<blockquote>
<p>推荐使用第二种方法，因为系统中需要轮替的日志非常多，如果全都直接写入<code>/etc/logrotate.conf</code>配置文件，那么这个文件的可管理性就会非常差，不利于此文件的维护。</p>
</blockquote>
<h2 id="查看内存日志"><a href="#查看内存日志" class="headerlink" title="查看内存日志"></a>查看内存日志</h2><p>journalctl 可以查看内存日志，这里我们看看常用的指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">journalctl <span class="comment"># 查看全部</span></span><br><span class="line">journalctl -n 3 <span class="comment"># 查看最新3条</span></span><br><span class="line">journalctl --since 19:00 --until 19:10:10 <span class="comment"># 查看起始时间到结束时间的日志可加日期</span></span><br><span class="line"></span><br><span class="line">journalctl -p err <span class="comment"># 报错日志</span></span><br><span class="line">journalctl -o verbose <span class="comment"># 日志详细内容</span></span><br><span class="line"></span><br><span class="line">journalctl _PID=1245 _COMM=sshd <span class="comment"># 查看包含这些参数的日志(在详细日志查看)</span></span><br><span class="line">journalctl | grep sshd</span><br></pre></td></tr></table></figure>
<p>注意: journalctl查看的是内存日志，重启清空</p>
<h1 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h1><p>linux的备份和恢复很简单 ，有两种方式</p>
<ol>
<li>把需要的文件(或者分区)用TAR打包就行，下次需要恢复的时候，再解压开覆盖即可</li>
<li>使用dump和restore命令</li>
</ol>
<blockquote>
<p>如果linux上没有 dump 和 restore 指令，需要先安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install dump</span><br><span class="line">yum -y install restore</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="使用dump完成备份"><a href="#使用dump完成备份" class="headerlink" title="使用dump完成备份"></a>使用dump完成备份</h2><p>dump 支持分卷和增量备份(所谓增量备份是指备份上次备份后 修改/增加过的文件，也称差异备份)。</p>
<h3 id="语法说明"><a href="#语法说明" class="headerlink" title="语法说明"></a>语法说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dump [ -cu] [-123456789] [ -f&lt;备份后文件名&gt;] [-T&lt;日期&gt;] [目录或文件系统]</span><br><span class="line">dump []-wW</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-c</td>
<td style="text-align:center">创建新的归档文件，并将由一个或多个文件参数所指定的内容写入归档文件的开头。</td>
</tr>
<tr>
<td style="text-align:center">-0123456789</td>
<td style="text-align:center">备份的层级。0为最完整备份，会备份所有文件。若指定0以上的层级，则备份至上一次备份以来修改或新增的文件。到9后，可以再次轮替。</td>
</tr>
<tr>
<td style="text-align:center">-f&lt;备份后文件名&gt;</td>
<td style="text-align:center">指定备份后文件名</td>
</tr>
<tr>
<td style="text-align:center">-j</td>
<td style="text-align:center">调用 bzlib 库压缩备份文件，也就是将备份后的文件压缩成 bz2格式，让文件更小</td>
</tr>
<tr>
<td style="text-align:center">-T&lt;日期&gt;:</td>
<td style="text-align:center">指定开始备份的时间与日期</td>
</tr>
<tr>
<td style="text-align:center">-u</td>
<td style="text-align:center">备份完毕后，在/etc/dumpdares中记录备份的文件系统，层级，日期与时间等。</td>
</tr>
<tr>
<td style="text-align:center">-t</td>
<td style="text-align:center">指定文件名，若该文件已存在备份文件中，则列出名称</td>
</tr>
<tr>
<td style="text-align:center">-W</td>
<td style="text-align:center">显示需要备份的文件及其最后一次备份的层级，时间 ，日期</td>
</tr>
<tr>
<td style="text-align:center">-w</td>
<td style="text-align:center">与-W类似，但仅显示需要备份的文件。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h3><p>将<code>/boot</code>分区所有内容备份到<code>/opt/boot.bak0.bz2</code>文件中，备份层级为0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dump -0uj -f /opt/boot.bak0.bz2 /boot</span><br></pre></td></tr></table></figure>
<p>在<code>/boot</code>目录下新加文件，备份层级为”1“（只备份上次使用层级”0“备份后发生过改变的数据）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /boot/hello.txt <span class="comment"># 随便加内容进去</span></span><br><span class="line">dump -1uj -f /opt/boot.bak1.bz2 /boot</span><br></pre></td></tr></table></figure>
<p>比较看看这次生成的备份文件boot.bak1.bz2有多大</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 /]<span class="comment"># ll -h /opt/</span></span><br><span class="line">总用量 140M</span><br><span class="line">-rw-r--r--. 1 root root 140M 2月  27 14:49 boot.bak0.bz2</span><br><span class="line">-rw-r--r--. 1 root root  12K 2月  27 14:52 boot.bak1.bz2</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通过dump命令配合crontab可以实现无人值守备份</p>
</blockquote>
<h3 id="dump-W"><a href="#dump-W" class="headerlink" title="dump -W"></a>dump -W</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示需要备份的文件及其最后一次备份的层级，时间，日期</span></span><br><span class="line">[root@itachi103 /]<span class="comment"># dump -W</span></span><br><span class="line">Last dump(s) <span class="keyword">done</span> (Dump <span class="string">&#x27;&gt;&#x27;</span> file systems):</span><br><span class="line">  /dev/sdb1	(/newdisk) Last dump: never</span><br><span class="line">  /dev/sda1	( /boot) Last dump: Level 1, Date Mon Feb 27 14:52:36 2023</span><br></pre></td></tr></table></figure>
<h3 id="查看备份时间文件"><a href="#查看备份时间文件" class="headerlink" title="查看备份时间文件"></a>查看备份时间文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 /]<span class="comment"># cat /etc/dumpdates </span></span><br><span class="line">/dev/sda1 0 Mon Feb 27 14:49:22 2023 +0800</span><br><span class="line">/dev/sda1 1 Mon Feb 27 14:52:36 2023 +0800</span><br></pre></td></tr></table></figure>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>dump只有备份分区的时候才支持增量备份。</p>
<p>如果备份的是文件或者目录，则不支持增量备份，即只能使用0级别的备份。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：使用dump备份/etc整个目录</span></span><br><span class="line">dump -0j -f /opt/etc.bak.bz2 /etc/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面语句会报错：DUMP: Only level 0 dumps are allowed on a subdirectory</span></span><br><span class="line">dump -1j -f /opt/etc.bak1.bz2 /etc/</span><br></pre></td></tr></table></figure>
<h2 id="使用restore恢复文件"><a href="#使用restore恢复文件" class="headerlink" title="使用restore恢复文件"></a>使用restore恢复文件</h2><p>restore 命令用来恢复已备份的文件，可以从dump 生成的备份文件中恢复原文件</p>
<h3 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restore [模式选项] [选项]</span><br></pre></td></tr></table></figure>
<p>说明下面四个模式不能混用，在一次命令中，只能指定一种。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">模式</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-C</td>
<td style="text-align:center">使用对比模式，将备份的文件与已存在的文件相互对比。</td>
</tr>
<tr>
<td style="text-align:center">-i</td>
<td style="text-align:center">使用交互模式，在进行还原操作时，restors指令将依序询问用户</td>
</tr>
<tr>
<td style="text-align:center">-r</td>
<td style="text-align:center">进行还原模式</td>
</tr>
<tr>
<td style="text-align:center">-t</td>
<td style="text-align:center">查看模式，看备份文件有哪些文件</td>
</tr>
</tbody>
</table>
</div>
<p>选项如下</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-f &lt;备份设备&gt;</td>
<td style="text-align:center">从指定的文件中读取备份数据，进行还原操作</td>
</tr>
</tbody>
</table>
</div>
<h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><h5 id="案例1：比较模式，比较备份文件和原文件的区别"><a href="#案例1：比较模式，比较备份文件和原文件的区别" class="headerlink" title="案例1：比较模式，比较备份文件和原文件的区别"></a>案例1：比较模式，比较备份文件和原文件的区别</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 /]<span class="comment"># mv /boot/hello.txt /boot/helloxxx.txt</span></span><br><span class="line">[root@itachi103 opt]<span class="comment"># restore -C -f /opt/boot.bak1.bz2 </span></span><br><span class="line">Dump tape is compressed.</span><br><span class="line">Dump   <span class="built_in">date</span>: Mon Feb 27 14:52:36 2023</span><br><span class="line">Dumped from: Mon Feb 27 14:49:22 2023</span><br><span class="line">Level 1 dump of /boot on itachi103:/dev/sda1</span><br><span class="line">Label: none</span><br><span class="line">filesys = /boot</span><br><span class="line">restore: unable to <span class="built_in">stat</span> ./hello.txt: No such file or directory</span><br><span class="line">Some files were modified!  1 compare errors</span><br><span class="line"></span><br><span class="line">[root@itachi103 opt]<span class="comment"># mv /boot/helloxxx.txt /boot/hello.txt</span></span><br><span class="line">[root@itachi103 opt]<span class="comment"># restore -C -f /opt/boot.bak1.bz2 </span></span><br><span class="line">Dump tape is compressed.</span><br><span class="line">Dump   <span class="built_in">date</span>: Mon Feb 27 14:52:36 2023</span><br><span class="line">Dumped from: Mon Feb 27 14:49:22 2023</span><br><span class="line">Level 1 dump of /boot on itachi103:/dev/sda1</span><br><span class="line">Label: none</span><br><span class="line">filesys = /boot</span><br></pre></td></tr></table></figure>
<h5 id="案例2：查看模式，查看备份文件有哪些数据-文件"><a href="#案例2：查看模式，查看备份文件有哪些数据-文件" class="headerlink" title="案例2：查看模式，查看备份文件有哪些数据/文件"></a>案例2：查看模式，查看备份文件有哪些数据/文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@itachi103 opt]<span class="comment"># restore -t -f /opt/boot.bak1.bz2 </span></span><br><span class="line">Dump tape is compressed.</span><br><span class="line">Dump   <span class="built_in">date</span>: Mon Feb 27 14:52:36 2023</span><br><span class="line">Dumped from: Mon Feb 27 14:49:22 2023</span><br><span class="line">Level 1 dump of /boot on itachi103:/dev/sda1</span><br><span class="line">Label: none</span><br><span class="line">         2	.</span><br><span class="line">       350	./hello.txt</span><br></pre></td></tr></table></figure>
<h5 id="案例3：还原模式"><a href="#案例3：还原模式" class="headerlink" title="案例3：还原模式"></a>案例3：还原模式</h5><p>注意细节：如果你有增量备份，需要把增量备份文件也进行恢复 ，有几个增量备份文件，就要恢复几个，按顺序来恢复即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /opt/boottmp</span><br><span class="line"><span class="built_in">cd</span> /opt/boottmp</span><br><span class="line">restore -r -f /opt/boot.bak0.bz2 <span class="comment"># 恢复到第1次完全备份状态</span></span><br><span class="line">restore -r -f /opt/boot.bak1.bz2 <span class="comment"># 恢复到第2次增量备份状态</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://leesin9527.github.io">leesin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://leesin9527.github.io/post/4.html">https://leesin9527.github.io/post/4.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://leesin9527.github.io" target="_blank">leesin</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a></div><div class="post_share"><div class="social-share" data-image="http://cdn.leesin.fun/hexo/article/4.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/8.html" title="JVM"><img class="cover" src="http://cdn.leesin.fun/hexo/article/8.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JVM</div></div></a></div><div class="next-post pull-right"><a href="/post/6.html" title="dp"><img class="cover" src="http://cdn.leesin.fun/hexo/article/6.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">dp</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.leesin.fun/hexo/avatar.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="avatar"/></div><div class="author-info__name">leesin</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/leesin9527" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="mailto:uchihazed@qq.com" target="_blank" title="Email"><i class="iconfont icon-email"></i></a><a class="social-icon" href="tencent://message/?uin=2269196662&amp;Site=Sambow&amp;Menu=yes" target="_blank" title="QQ"><i class="iconfont icon-qq"></i></a><a class="social-icon" href="https://space.bilibili.com/350235279?spm_id_from=333.999.0.0" target="_blank" title="B站"><i class="iconfont icon-bilibili"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-number">1.1.</span> <span class="toc-text">添加用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-number">1.2.</span> <span class="toc-text">指定&#x2F;修改密码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">1.3.</span> <span class="toc-text">删除用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">查询用户信息指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7"><span class="toc-number">1.5.</span> <span class="toc-text">切换用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7"><span class="toc-number">1.6.</span> <span class="toc-text">查看当前用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%99%BB%E5%BD%95%E7%94%A8%E7%94%A8%E6%88%B7"><span class="toc-number">1.7.</span> <span class="toc-text">查看登录用用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-number">1.8.</span> <span class="toc-text">用户组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E7%BB%84"><span class="toc-number">1.8.1.</span> <span class="toc-text">新增组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%BB%84"><span class="toc-number">1.8.2.</span> <span class="toc-text">删除组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E6%97%B6%EF%BC%8C%E7%BB%99%E5%85%B6%E6%8C%87%E5%AE%9A%E7%BB%84"><span class="toc-number">1.8.3.</span> <span class="toc-text">添加用户时，给其指定组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E6%97%B6%EF%BC%8C%E6%9C%AA%E6%8C%87%E5%AE%9A%E6%8C%87%E5%AE%9A%E7%BB%84"><span class="toc-number">1.8.4.</span> <span class="toc-text">添加用户时，未指定指定组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E7%9A%84%E7%BB%84"><span class="toc-number">1.9.</span> <span class="toc-text">修改用户的组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%E7%9A%84%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6"><span class="toc-number">1.10.</span> <span class="toc-text">用户和组的相关文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">实用指令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB"><span class="toc-number">2.1.</span> <span class="toc-text">运行级别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB"><span class="toc-number">2.1.1.</span> <span class="toc-text">切换运行级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E9%BB%98%E8%AE%A4%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB"><span class="toc-number">2.1.2.</span> <span class="toc-text">查看默认运行级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E8%BF%90%E8%A1%8C%E7%BA%A7%E5%88%AB"><span class="toc-number">2.1.3.</span> <span class="toc-text">修改默认运行级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%AE%E5%8A%A9%E6%8C%87%E4%BB%A4"><span class="toc-number">2.2.</span> <span class="toc-text">帮助指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gt-%E5%92%8C-gt-gt-%E6%8C%87%E4%BB%A4"><span class="toc-number">2.3.</span> <span class="toc-text">&gt;和&gt;&gt;指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ln%E6%8C%87%E4%BB%A4"><span class="toc-number">2.4.</span> <span class="toc-text">ln指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#history%E6%8C%87%E4%BB%A4"><span class="toc-number">2.5.</span> <span class="toc-text">history指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4"><span class="toc-number">2.6.</span> <span class="toc-text">时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%B1%BB%E6%8C%87%E4%BB%A4"><span class="toc-number">2.7.</span> <span class="toc-text">搜索类指令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#find%E6%8C%87%E4%BB%A4"><span class="toc-number">2.7.1.</span> <span class="toc-text">find指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#locate%E6%8C%87%E4%BB%A4"><span class="toc-number">2.7.2.</span> <span class="toc-text">locate指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#which%E6%8C%87%E4%BB%A4"><span class="toc-number">2.7.3.</span> <span class="toc-text">which指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep%E6%8C%87%E4%BB%A4%E5%92%8C%E7%AE%A1%E9%81%93%E7%AC%A6%E5%8F%B7"><span class="toc-number">2.7.4.</span> <span class="toc-text">grep指令和管道符号|</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E8%A7%A3%E5%8E%8B"><span class="toc-number">2.8.</span> <span class="toc-text">压缩解压</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#gzip-gunzip-%E5%8E%8B%E7%BC%A9-%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-number">2.8.1.</span> <span class="toc-text">gzip&#x2F;gunzip  压缩&#x2F;解压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip-unzip"><span class="toc-number">2.8.2.</span> <span class="toc-text">zip&#x2F;unzip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tar%E6%8C%87%E4%BB%A4"><span class="toc-number">2.8.3.</span> <span class="toc-text">tar指令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#chmod%E6%8C%87%E4%BB%A4"><span class="toc-number">3.0.1.</span> <span class="toc-text">chmod指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">3.0.1.1.</span> <span class="toc-text">第一种方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">3.0.1.2.</span> <span class="toc-text">第二种方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9%E5%8F%98%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85"><span class="toc-number">3.0.1.3.</span> <span class="toc-text">改变文件所有者</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9%E5%8F%98%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85%E5%92%8C%E6%89%80%E6%9C%89%E7%BB%84"><span class="toc-number">3.0.1.4.</span> <span class="toc-text">改变文件所有者和所有组</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E7%BB%84"><span class="toc-number">3.0.2.</span> <span class="toc-text">修改文件所有组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rwx%E4%BD%9C%E7%94%A8%E5%88%B0%E6%96%87%E4%BB%B6"><span class="toc-number">3.0.3.</span> <span class="toc-text">rwx作用到文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rwx%E4%BD%9C%E7%94%A8%E5%88%B0%E7%9B%AE%E5%BD%95"><span class="toc-number">3.0.4.</span> <span class="toc-text">rwx作用到目录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">4.</span> <span class="toc-text">定时任务调度</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#crontab"><span class="toc-number">4.1.</span> <span class="toc-text">crontab</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E7%BB%86%E8%8A%82%E8%AF%B4%E6%98%8E"><span class="toc-number">4.1.0.1.</span> <span class="toc-text">参数细节说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E4%B8%AA%E5%8D%A0%E4%BD%8D%E7%AC%A6%E8%AF%B4%E6%98%8E"><span class="toc-number">4.1.0.1.1.</span> <span class="toc-text">5个占位符说明</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7%E8%AF%B4%E6%98%8E"><span class="toc-number">4.1.0.1.2.</span> <span class="toc-text">特殊符号说明</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%97%B6%E9%97%B4%E6%89%A7%E8%A1%8C%E6%A1%88%E4%BE%8B"><span class="toc-number">4.1.0.1.3.</span> <span class="toc-text">特殊时间执行案例</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#at"><span class="toc-number">4.2.</span> <span class="toc-text">at</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.2.1.</span> <span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.2.</span> <span class="toc-text">命令格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#at%E5%91%BD%E4%BB%A4%E9%80%89%E9%A1%B9"><span class="toc-number">4.2.2.1.</span> <span class="toc-text">at命令选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#at%E6%97%B6%E9%97%B4%E5%AE%9A%E4%B9%89"><span class="toc-number">4.2.2.2.</span> <span class="toc-text">at时间定义</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">4.2.3.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">磁盘管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E3%80%81%E6%8C%82%E8%BD%BD"><span class="toc-number">5.1.</span> <span class="toc-text">磁盘分区、挂载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%B7%BB%E5%8A%A0%E7%A1%AC%E7%9B%98"><span class="toc-number">5.1.0.1.</span> <span class="toc-text">1.虚拟机添加硬盘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%88%86%E5%8C%BA"><span class="toc-number">5.1.0.2.</span> <span class="toc-text">2.分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%A3%81%E7%9B%98"><span class="toc-number">5.1.0.3.</span> <span class="toc-text">3.格式化磁盘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%8C%82%E8%BD%BD"><span class="toc-number">5.1.0.4.</span> <span class="toc-text">4.挂载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%B0%B8%E4%B9%85%E6%8C%82%E8%BD%BD"><span class="toc-number">5.1.0.5.</span> <span class="toc-text">5.永久挂载</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E6%83%85%E5%86%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.2.</span> <span class="toc-text">磁盘情况查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F%E6%95%B4%E4%BD%93%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="toc-number">5.2.1.</span> <span class="toc-text">查询系统整体磁盘使用情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="toc-number">5.2.2.</span> <span class="toc-text">查询指定目录使用情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E6%83%85%E5%86%B5-%E5%B7%A5%E4%BD%9C%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">5.2.3.</span> <span class="toc-text">磁盘情况-工作实用指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BB%9F%E8%AE%A1-opt%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%AA%E6%95%B0"><span class="toc-number">5.2.3.1.</span> <span class="toc-text">1.统计&#x2F;opt文件夹下文件的个数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BB%9F%E8%AE%A1-opt%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9B%AE%E5%BD%95%E7%9A%84%E4%B8%AA%E6%95%B0"><span class="toc-number">5.2.3.2.</span> <span class="toc-text">2.统计&#x2F;opt文件夹下目录的个数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BB%9F%E8%AE%A1-opt%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%AA%E6%95%B0%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%AD%90%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E7%9A%84"><span class="toc-number">5.2.3.3.</span> <span class="toc-text">3.统计&#x2F;opt文件夹下文件的个数，包括子文件夹里的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%BB%9F%E8%AE%A1-opt%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9B%AE%E5%BD%95%E7%9A%84%E4%B8%AA%E6%95%B0%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%AD%90%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E7%9A%84"><span class="toc-number">5.2.3.4.</span> <span class="toc-text">4.统计&#x2F;opt文件夹下目录的个数，包括子文件夹里的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BB%A5%E6%A0%91%E7%8A%B6%E6%98%BE%E7%A4%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84tree%E7%9B%AE%E5%BD%95%E3%80%82"><span class="toc-number">5.2.3.5.</span> <span class="toc-text">5.以树状显示目录结构tree目录。</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">网络管理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-number">7.</span> <span class="toc-text">进程管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ps%E6%8C%87%E4%BB%A4"><span class="toc-number">7.1.</span> <span class="toc-text">ps指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%88%E6%AD%A2%E8%BF%9B%E7%A8%8Bkill%E5%92%8Ckillall"><span class="toc-number">7.2.</span> <span class="toc-text">终止进程kill和killall</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">7.3.</span> <span class="toc-text">服务管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#service%E7%AE%A1%E7%90%86%E6%8C%87%E4%BB%A4"><span class="toc-number">7.3.1.</span> <span class="toc-text">service管理指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#systemctl%E7%AE%A1%E7%90%86%E6%8C%87%E4%BB%A4"><span class="toc-number">7.3.2.</span> <span class="toc-text">systemctl管理指令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">7.3.2.0.1.</span> <span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E7%8A%B6%E6%80%81%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8grep%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">7.3.2.0.2.</span> <span class="toc-text">查看服务开机启动状态，可以使用grep进行过滤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="toc-number">7.3.2.0.3.</span> <span class="toc-text">设置服务开机启动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="toc-number">7.3.2.0.4.</span> <span class="toc-text">关闭服务开机启动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%9F%90%E4%B8%AA%E6%9C%8D%E5%8A%A1%E6%98%AF%E5%90%A6%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="toc-number">7.3.2.0.5.</span> <span class="toc-text">查询某个服务是否开机自启动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B%EF%BC%9A%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="toc-number">7.3.2.0.6.</span> <span class="toc-text">举例：关闭防火墙，以及关闭防火墙开机自启</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#firewall%E6%8C%87%E4%BB%A4"><span class="toc-number">7.3.3.</span> <span class="toc-text">firewall指令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E7%AB%AF%E5%8F%A3"><span class="toc-number">7.3.3.0.1.</span> <span class="toc-text">打开端口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E7%AB%AF%E5%8F%A3"><span class="toc-number">7.3.3.0.2.</span> <span class="toc-text">关闭端口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E5%BC%80%E6%94%BE"><span class="toc-number">7.3.3.0.3.</span> <span class="toc-text">查询端口是否开放</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F"><span class="toc-number">7.3.4.</span> <span class="toc-text">动态监控系统</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#top%E5%91%BD%E4%BB%A4"><span class="toc-number">7.3.4.1.</span> <span class="toc-text">top命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E4%BA%92%E6%93%8D%E4%BD%9C"><span class="toc-number">7.3.4.1.1.</span> <span class="toc-text">交互操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E7%9B%91%E8%A7%86%E7%89%B9%E5%AE%9A%E7%94%A8%E6%88%B7"><span class="toc-number">7.3.4.1.2.</span> <span class="toc-text">案例1：监视特定用户</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E7%BB%88%E6%AD%A2%E7%89%B9%E5%AE%9A%E8%BF%9B%E7%A8%8B"><span class="toc-number">7.3.4.1.3.</span> <span class="toc-text">案例2：终止特定进程</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%91%E6%8E%A7%E7%BD%91%E7%BB%9C%E7%8A%B6%E6%80%81"><span class="toc-number">7.4.</span> <span class="toc-text">监控网络状态</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-number">8.</span> <span class="toc-text">日志</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E6%97%A5%E5%BF%97"><span class="toc-number">8.1.</span> <span class="toc-text">系统常用日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86-rsyslogd"><span class="toc-number">8.2.</span> <span class="toc-text">日志服务管理 rsyslogd</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">8.2.0.0.1.</span> <span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.2.0.0.2.</span> <span class="toc-text">日志类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-number">8.2.0.0.3.</span> <span class="toc-text">日志级别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%86%85%E5%AE%B9%E6%A0%BC%E5%BC%8F"><span class="toc-number">8.2.0.0.4.</span> <span class="toc-text">日志内容格式</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%BD%AE%E6%9B%BF"><span class="toc-number">8.3.</span> <span class="toc-text">日志轮替</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-2"><span class="toc-number">8.3.0.0.1.</span> <span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">8.3.0.0.2.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%86%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A5%E5%BF%97%E5%8A%A0%E5%85%A5%E6%97%A5%E5%BF%97%E8%BD%AE%E6%9B%BF"><span class="toc-number">8.3.0.0.3.</span> <span class="toc-text">将自己的日志加入日志轮替</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%86%85%E5%AD%98%E6%97%A5%E5%BF%97"><span class="toc-number">8.4.</span> <span class="toc-text">查看内存日志</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%87%E4%BB%BD"><span class="toc-number">9.</span> <span class="toc-text">备份</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8dump%E5%AE%8C%E6%88%90%E5%A4%87%E4%BB%BD"><span class="toc-number">9.1.</span> <span class="toc-text">使用dump完成备份</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E8%AF%B4%E6%98%8E"><span class="toc-number">9.1.1.</span> <span class="toc-text">语法说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">9.1.2.</span> <span class="toc-text">应用案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dump-W"><span class="toc-number">9.1.3.</span> <span class="toc-text">dump -W</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%A4%87%E4%BB%BD%E6%97%B6%E9%97%B4%E6%96%87%E4%BB%B6"><span class="toc-number">9.1.4.</span> <span class="toc-text">查看备份时间文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">9.1.5.</span> <span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8restore%E6%81%A2%E5%A4%8D%E6%96%87%E4%BB%B6"><span class="toc-number">9.2.</span> <span class="toc-text">使用restore恢复文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="toc-number">9.2.1.</span> <span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-number">9.2.2.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E6%AF%94%E8%BE%83%E6%A8%A1%E5%BC%8F%EF%BC%8C%E6%AF%94%E8%BE%83%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E5%92%8C%E5%8E%9F%E6%96%87%E4%BB%B6%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">9.2.2.0.1.</span> <span class="toc-text">案例1：比较模式，比较备份文件和原文件的区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%BC%8F%EF%BC%8C%E6%9F%A5%E7%9C%8B%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E6%9C%89%E5%93%AA%E4%BA%9B%E6%95%B0%E6%8D%AE-%E6%96%87%E4%BB%B6"><span class="toc-number">9.2.2.0.2.</span> <span class="toc-text">案例2：查看模式，查看备份文件有哪些数据&#x2F;文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B3%EF%BC%9A%E8%BF%98%E5%8E%9F%E6%A8%A1%E5%BC%8F"><span class="toc-number">9.2.2.0.3.</span> <span class="toc-text">案例3：还原模式</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/26.html" title="【Spring基础】Spring后处理器"><img src="http://cdn.leesin.fun/hexo/article/26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Spring基础】Spring后处理器"/></a><div class="content"><a class="title" href="/post/26.html" title="【Spring基础】Spring后处理器">【Spring基础】Spring后处理器</a><time datetime="2023-05-01T10:10:00.000Z" title="发表于 2023-05-01 18:10:00">2023-05-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/25.html" title="【Spring基础】Bean实例化流程"><img src="http://cdn.leesin.fun/hexo/article/25.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Spring基础】Bean实例化流程"/></a><div class="content"><a class="title" href="/post/25.html" title="【Spring基础】Bean实例化流程">【Spring基础】Bean实例化流程</a><time datetime="2023-04-29T14:59:00.000Z" title="发表于 2023-04-29 22:59:00">2023-04-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/24.html" title="【Spring基础】基于xml的Spring应用"><img src="http://cdn.leesin.fun/hexo/article/24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Spring基础】基于xml的Spring应用"/></a><div class="content"><a class="title" href="/post/24.html" title="【Spring基础】基于xml的Spring应用">【Spring基础】基于xml的Spring应用</a><time datetime="2023-04-28T14:59:00.000Z" title="发表于 2023-04-28 22:59:00">2023-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/24.html" title="【Spring基础】BeanFactory与ApplicationContext"><img src="http://cdn.leesin.fun/hexo/article/24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Spring基础】BeanFactory与ApplicationContext"/></a><div class="content"><a class="title" href="/post/24.html" title="【Spring基础】BeanFactory与ApplicationContext">【Spring基础】BeanFactory与ApplicationContext</a><time datetime="2023-04-26T15:01:00.000Z" title="发表于 2023-04-26 23:01:00">2023-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/23.html" title="【Spring基础】IoC、DI、AOP"><img src="http://cdn.leesin.fun/hexo/article/23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Spring基础】IoC、DI、AOP"/></a><div class="content"><a class="title" href="/post/23.html" title="【Spring基础】IoC、DI、AOP">【Spring基础】IoC、DI、AOP</a><time datetime="2023-04-26T14:59:00.000Z" title="发表于 2023-04-26 22:59:00">2023-04-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By leesin</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script src="/js/jquery.js"></script><script src="/js/foot.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script src="/js/sun_moon.js" async></script><div class="aplayer no-destroy" data-id="8261498022" data-server="netease" data-type="playlist"  data-mini="true" data-fixed="true" data-autoplay="false" data-listfolded="true" data-lrctype="0"> </div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>